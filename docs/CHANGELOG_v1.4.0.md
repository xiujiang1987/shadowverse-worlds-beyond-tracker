# Shadowverse: Worlds Beyond Tracker v1.4.0 更新日誌

## 📊 新功能：分組升降追蹤系統

### 📅 發布日期：2025-07-01

### ✨ 新增功能

#### 1. 分組變動標記系統
- **📌 標記按鈕**：每筆對戰記錄旁新增標記按鈕，可標記分組變動的場次
- **📍 已標記提示**：已標記的場次顯示為金色圖釘，未標記為灰色圖釘
- **智慧對話框**：點擊標記時彈出詳細設定對話框
- **詳細記錄**：可記錄變動前後分組、原因、當時統計數據

#### 2. 分組變動數據記錄
- **完整追蹤**：記錄每次分組變動的詳細信息
  - 變動發生的對戰場次
  - 變動前後分組
  - 當時的勝率、總場次、BP
  - 對戰詳情（職業、先手/後手、結果）
  - 變動原因（用戶自定義）
  - 精確時間戳記

#### 3. 分組變動分析報告
- **📊 統計摘要**：
  - 總變動次數
  - 升級/降級次數統計
  - 平均變動場次
  - 各分組變動詳情

- **📈 勝率分析**：
  - 升級時平均勝率
  - 降級時平均勝率
  - 變動時勝率分布

- **📝 詳細記錄**：
  - 每次變動的完整信息
  - 時間軸排序
  - 對戰背景資訊

#### 4. 數據匯出功能
- **新增匯出按鈕**：玩家資料面板中的「📊 匯出分組變動分析」
- **格式化報告**：自動生成結構化分析報告
- **檔案命名**：自動命名為 `shadowverse_rank_analysis_YYYY-MM-DD.txt`

### 🔧 技術實作

#### 後端邏輯
- **DataManager.recordRankChange()**：記錄分組變動
- **DataManager.getRankChangeAnalysis()**：統計分析算法
- **DataManager.exportRankChangeAnalysis()**：生成分析報告
- **localStorage 持久化**：所有變動記錄永久保存

#### 前端互動
- **UIController.toggleRankChange()**：切換標記狀態
- **UIController.promptRankChange()**：彈出設定對話框
- **智慧模態對話框**：美化的分組變動設定界面
- **即時更新**：標記後立即更新顯示

#### 數據結構
```javascript
{
  id: 1,
  battleId: 16,
  battleIndex: 16,
  timestamp: "2025-07-01T...",
  fromRank: "藍寶石",
  toRank: "紅寶石",
  battleDetails: { /* 對戰詳情 */ },
  statsAtChange: { /* 當時統計 */ },
  reason: "連敗後勝率下降"
}
```

### 🎮 使用方式

#### 標記分組變動
1. **查看對戰記錄**：進入「對戰記錄」面板
2. **點擊標記按鈕**：找到分組變動的場次，點擊 📌 按鈕
3. **填寫變動詳情**：
   - 選擇變動前分組
   - 選擇變動後分組
   - 輸入變動原因
4. **確認記錄**：點擊確認，系統自動記錄

#### 分析數據
1. **進入玩家資料**：點擊「玩家資料」面板
2. **匯出分析**：點擊「📊 匯出分組變動分析」按鈕
3. **查看報告**：下載的 .txt 文件包含完整分析

### 📊 分析用途

#### 優化升降邏輯
- **數據驗證**：對比實際分組變動與理論計算
- **參數調整**：根據實際數據調整勝率閾值
- **規律發現**：找出分組升降的真實規律

#### 遊戲策略
- **風險評估**：了解在什麼勝率下容易降級
- **目標設定**：設定合理的勝率目標
- **進度追蹤**：監控分組穩定性

### 🔮 後續應用

這個追蹤系統將幫助：
1. **校準自動分組調整邏輯**
2. **開發更精確的分組預測算法**
3. **提供個人化的遊戲建議**
4. **建立分組升降的統計模型**

### 📁 檔案異動

#### 新增/修改檔案：
- `src/js/data-manager.js`：新增分組變動記錄與分析功能
- `src/js/ui-controller.js`：新增標記界面與匯出功能
- `src/js/config.js`：新增 localStorage 鍵
- `src/css/styles.css`：新增標記按鈕樣式
- `index.html`：新增匯出分析按鈕

#### 建置產出：
- `index_bundle.html`：包含所有新功能的單檔案版本
- `launcher.html`：更新的開發啟動器

### 💡 使用建議

1. **及時標記**：在發現分組變動時立即標記，確保記錄準確
2. **詳細原因**：記錄變動原因有助於後續分析
3. **定期匯出**：定期匯出分析報告，追蹤趨勢變化
4. **對比驗證**：將實際變動與系統預測對比，發現偏差

---

### 📞 技術支援

這個功能將幫助您：
- 🔍 精確追蹤分組變動
- 📈 分析升降規律
- ⚙️ 優化計算邏輯
- 🎯 制定更好的遊戲策略

**版本：v1.4.0**  
**發布日期：2025-07-01**  
**關鍵字：分組追蹤、數據分析、升降邏輯**
